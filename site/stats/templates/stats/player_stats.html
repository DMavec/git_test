{% extends "stats\base_generic.html" %}

{% block title %}
<title>League Stats {{player}}</title>
<div class="navbar-brand">League Stats</div>
<!--{{ q|safe }}-->

<div class="container-fluid">
    <div class="row">
        <div class="col">
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Player
                </button>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    {% for player in players %}
                    <li>
                        <a class="dropdown-item" href="{% url 'stats:player_stats' player %}">
                            {{ player }}
                        </a>
                    </li>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="col">
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Player
                </button>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    {% for player in players %}
                    <li>
                        <a class="dropdown-item" href="{% url 'stats:player_stats' player %}">
                            {{ player }}
                        </a>
                    </li>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="col">
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Player
                </button>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    {% for player in players %}
                    <li>
                        <a class="dropdown-item" href="{% url 'stats:player_stats' player %}">
                            {{ player }}
                        </a>
                    </li>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block chart_scripts %}
<!-- Win Rate Across Players -->
<script type="text/javascript">
    var winrateDate = {{ bar_data|safe }};

    var barChartData = {
        labels: winrateDate.players,
        datasets: [{
            label: "Win Rate",
            borderColor: "rgba(106, 176, 76,1.0)",
            backgroundColor: "rgba(106, 176, 76,1.0)",
            <!--fill: false,-->
            data: winrateDate.winrate
        }]
    };

    var barOptions = {
        scales: {
            yAxes: [{
                ticks: {
                    suggestedMin: 0,
                    suggestedMax: 100
                }
            }]
        },
        legend: {
            display: false
        }
    };

    var ctx = document.getElementById("winRateBarChart").getContext("2d");
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: barChartData,
        options: barOptions
    });
</script>
{% endblock %}

{% block content %}
<div class="content-wrapper">
    <div class="container-fluid">
        <!-- Breadcrumbs-->
        <!--<ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="#">Dashboard</a>
          </li>
          <li class="breadcrumb-item active">Charts</li>
        </ol>-->
        <!-- Example DataTables Card-->
        <div class="card mb-3">
            <div class="card-header">
                <i class="fa fa-table"></i> All Player Stats
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Games</th>
                            <th>Wins</th>
                            <th>Win Rate</th>
                        </tr>
                        </thead>
                        <!--<tfoot>
                             <tr>
                                 <th>Name</th>
                                 <th>Position</th>
                                 <th>Office</th>
                                 <th>Age</th>
                                 <th>Start date</th>
                                 <th>Salary</th>
                             </tr>
                        </tfoot>-->
                        {% for summary_stat in summary_stats %}
                        <tr>
                            <td>{{ summary_stat.player_name }}</td>
                            <td>{{ summary_stat.games }}</td>
                            <td>{{ summary_stat.wins }}</td>
                            <td>{{ summary_stat.win_rate }}</td>
                        </tr>
                        </tbody>
                        {% endfor %}
                    </table>
                </div>
            </div>
            <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
        </div>

          <div class="row">
            <div class="col-lg-8">
                <!-- Example Bar Chart Card-->
                <div class="card mb-3">
                    <div class="card-header">
                        <i class="fa fa-chart-bar"></i> Bar Chart Example
                    </div>
                    <div class="card-body">
                        <canvas id="winRateBarChart" width="100" height="50"></canvas>
                    </div>
                    <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
                </div>
            </div>
            <div class="col-lg-4">
                <!-- Example Pie Chart Card-->
                <div class="card mb-3">
                    <div class="card-header">
                        <i class="fa fa-chart-pie"></i> Pie Chart Example
                    </div>
                    <div class="card-body">
                        <!--<canvas id="myPieChart" width="100%" height="100"></canvas>-->
                    </div>
                    <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
                </div>
            </div>
        </div>
              <!-- Area Chart Example-->
        <div class="card mb-3">
            <div class="card-header">
                <i class="fa fa-chart-area"></i> Area Chart Example
            </div>
            <div class="card-body">
                <canvas id="myAreaChart" width="100%" height="30"></canvas>
            </div>
            <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
        </div>
    </div>
</div>
<!-- /.container-fluid-->
<!-- /.content-wrapper-->
{% endblock %}